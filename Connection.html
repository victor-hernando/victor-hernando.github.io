 <!DOCTYPE html>
<html>
	<head>
		<title>Connection text</title>
	</head>
	<body>
    	<h1>Hola Mundo!</h1>
    	<p>Welcome to my 2nd GitHub Page!</p>

		<div id="box" style="width:150px;height:150px;background:red;margin:20px auto;"></div>
		<input type="text"	id="text" name="name" required minlength="4" maxlength="8" size="10" style="width:150px;height:150px; auto"/>
		<button id="btn">Cambiar color</button>


		<script type="module">
  			// Import the functions you need from the SDKs you need
  			import { initializeApp } from "https://www.gstatic.com/firebasejs/12.4.0/firebase-app.js";
			import { getDatabase, ref, onValue, set } from "https://www.gstatic.com/firebasejs/12.4.0/firebase-database.js";
  			import { getAnalytics } from "https://www.gstatic.com/firebasejs/12.4.0/firebase-analytics.js";
  			// TODO: Add SDKs for Firebase products that you want to use
		  	// https://firebase.google.com/docs/web/setup#available-libraries

  			// Your web app's Firebase configuration
  			// For Firebase JS SDK v7.20.0 and later, measurementId is optional
  			const firebaseConfig = {
    			apiKey: "AIzaSyAWAEJahdFnVkQQk7whGWbGru3lus_f4sE",
    			authDomain: "test1-df122.firebaseapp.com",
    			databaseURL: "https://test1-df122-default-rtdb.europe-west1.firebasedatabase.app",
    			projectId: "test1-df122",
    			storageBucket: "test1-df122.firebasestorage.app",
    			messagingSenderId: "745442720279",
    			appId: "1:745442720279:web:43eff7bb8a3a4abd357a52",
    			measurementId: "G-ZJ8TSC1WJ4"
  			};

  			// Initialize Firebase
  			const app = initializeApp(firebaseConfig);
  			const analytics = getAnalytics(app);
			const db = getDatabase(app);

			const box = document.getElementById('box');
			const btn = document.getElementById('btn');
			const txtField = document.getElementById('text');
			const colorRef = ref(db, 'sharedColor');
			const txt = ref(db, 'sharedText');

			onValue(colorRef, (snapshot) => {
				const color = snapshot.val() || 'red';
				box.style.background = color;
			});

			onValue(txt, (snapshot) => {
				const text = snapshot.val();
				txtField.value = text;
			});

			btn.addEventListener('click', () => {
				const newColor = box.style.background === 'red' ? 'blue' : 'red';
				set(txt, txtField.value);
				set(colorRef, newColor);
			});
		</script>
 	</body>
</html>
